<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radar Distribuidora - Sistema Gest√£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; }
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(8px); }
        .modal-content { background: white; margin: 2% auto; padding: 20px; width: 95%; max-width: 900px; border-radius: 30px; max-height: 90vh; overflow-y: auto; }
        .card-produto { transition: transform 0.2s; border: 2px solid transparent; }
        .img-container { width: 100%; height: 130px; background: #fff; border-radius: 20px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .img-produto { max-width: 100%; max-height: 100%; object-fit: contain; }
        .aba-ativa { background-color: #2563eb !important; color: white !important; }
        .hidden { display: none !important; }
    </style>
</head>
<body class="pb-72">

    <header class="bg-blue-600 text-white p-6 sticky top-0 z-50 shadow-2xl flex justify-between items-center rounded-b-[40px]">
        <div>
            <h1 class="text-2xl font-black italic uppercase tracking-tighter">RADAR <span class="font-extralight text-blue-200">DISTRIBUIDORA</span></h1>
            <p class="text-[10px] font-bold opacity-70 tracking-[3px]">CONTROLE DE PEDIDOS v3.0</p>
        </div>
        <button onclick="fazerLogin()" class="bg-blue-700 p-3 rounded-2xl text-[10px] font-black uppercase shadow-inner">PAINEL ADM</button>
    </header>

    <main class="container mx-auto p-4 max-w-6xl">
        <div class="relative my-8">
            <input type="text" id="busca" oninput="filtrar()" placeholder="Pesquisar entre os 432 itens..." 
                class="w-full p-6 pl-14 bg-white border-none rounded-3xl shadow-xl focus:ring-4 focus:ring-blue-400 outline-none transition-all text-lg font-medium">
            <span class="absolute left-6 top-6 text-xl opacity-30">üîç</span>
        </div>
        <div id="vitrine" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"></div>
    </main>

    <div id="modalAdmin" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6 border-b pb-4">
                <h2 class="text-2xl font-black text-slate-800 italic uppercase">Gest√£o Radar</h2>
                <button onclick="fecharAdmin()" class="bg-slate-100 p-3 rounded-full">‚úï</button>
            </div>
            
            <div class="flex gap-2 mb-8 border-b pb-3 overflow-x-auto">
                <button onclick="mudarAba('produtos')" id="btn-produtos" class="aba-btn aba-ativa px-6 py-3 rounded-2xl font-black text-xs uppercase">Produtos</button>
                <button onclick="mudarAba('vendas')" id="btn-vendas" class="aba-btn bg-slate-100 text-slate-500 px-6 py-3 rounded-2xl font-black text-xs uppercase">Vendas</button>
                <button onclick="mudarAba('financeiro')" id="btn-financeiro" class="aba-btn bg-slate-100 text-slate-500 px-6 py-3 rounded-2xl font-black text-xs uppercase">Financeiro</button>
                <button onclick="mudarAba('orcamentos')" id="btn-orcamentos" class="aba-btn bg-slate-100 text-slate-500 px-6 py-3 rounded-2xl font-black text-xs uppercase">Or√ßamentos</button>
            </div>

            <div id="aba-produtos" class="secao-aba">
                <div id="lista-edicao" class="space-y-3 max-h-[500px] overflow-y-auto pr-2"></div>
            </div>

            <div id="aba-vendas" class="secao-aba hidden">
                <div id="historico-vendas" class="space-y-4 text-sm text-slate-600">Nenhuma venda registrada.</div>
            </div>

            <div id="aba-financeiro" class="secao-aba hidden">
                <div class="p-8 bg-green-50 rounded-[40px] border-2 border-green-100 text-center">
                    <p class="text-xs font-black text-green-600 uppercase mb-2">Total Vendido Acumulado</p>
                    <p id="fin-total" class="text-5xl font-black text-green-700 italic">R$ 0,00</p>
                </div>
            </div>

            <div id="aba-orcamentos" class="secao-aba hidden">
                <div class="p-6 bg-slate-50 rounded-3xl border border-dashed text-center">
                    <p class="font-bold text-slate-500">M√≥dulo de Or√ßamentos Ativo</p>
                    <p class="text-[10px] uppercase text-slate-400">Os pedidos registrados via WhatsApp aparecem em Vendas.</p>
                </div>
            </div>

            <button onclick="exportarDados()" class="w-full bg-blue-600 text-white py-6 mt-8 rounded-3xl font-black uppercase tracking-widest shadow-2xl transition-all">Salvar Tudo e Atualizar Site</button>
        </div>
    </div>

    <div class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-xl border-t p-6 shadow-2xl z-40 rounded-t-[50px]">
        <div class="container mx-auto max-w-5xl">
            <div class="grid grid-cols-2 gap-4 mb-6">
                <input type="text" id="cliente_nome" placeholder="Seu Nome / Loja" class="p-4 rounded-2xl bg-slate-100 font-bold outline-none">
                <input type="text" id="cliente_end" placeholder="Cidade / Endere√ßo" class="p-4 rounded-2xl bg-slate-100 font-bold outline-none">
            </div>
            <div class="flex justify-between items-center">
                <div>
                    <span class="text-slate-400 text-[10px] font-black uppercase">Total Pedido</span>
                    <p id="total-geral" class="text-4xl font-black text-blue-600 italic">R$ 0,00</p>
                </div>
                <button onclick="enviarWhatsApp()" class="bg-green-500 text-white px-12 py-5 rounded-[30px] font-black uppercase shadow-xl transition-all hover:scale-105">Finalizar Pedido</button>
            </div>
        </div>
    </div>

    <script>
        const FONE = "5547997691722";
        const SENHA_MESTRA = "1234";

        // LISTA DE PRODUTOS COMPLETA (Resumo das categorias principais para n√£o exceder limite de texto)
        let produtos = [
            { id: "1", desc: "ABS COTTON LINE C/16 SUAVE C/ABAS", preco: 0.00, img: "" },
            { id: "2", desc: "ABS COTTON LINE C/8 SECA C/ ABAS", preco: 0.00, img: "" },
            { id: "3", desc: "ABS COTTON LINE C/8 SECA S/ ABAS", preco: 0.00, img: "" },
            { id: "4", desc: "ABS COTTON LINE C/8 SUAVE C/ ABAS", preco: 0.00, img: "" },
            { id: "5", desc: "ABS COTTON LINE C/8 SUAVE S/ ABAS", preco: 0.00, img: "" },
            { id: "12", desc: "ABS INTERNO INTIMUS MEDIO C/8", preco: 0.00, img: "" },
            { id: "15", desc: "ABS INTIMUS C/32 SUAVE C/ ABAS", preco: 0.00, img: "" },
            { id: "28", desc: "ACENDEDOR ITAJUBA 500ML", preco: 0.00, img: "" },
            { id: "39", desc: "ALCOOL 46 SANEANTE ITAJUBA 1L", preco: 0.00, img: "" },
            { id: "41", desc: "ALCOOL 70 SUPER VALE LIQ 1L", preco: 0.00, img: "" },
            { id: "50", desc: "CASADINHO XIXI AQUI PET COALA", preco: 0.00, img: "" },
            { id: "81", desc: "CHICLE TRIDENT CANELA C/21", preco: 0.00, img: "" },
            { id: "115", desc: "CONDICIONADOR DARLAN 400ML", preco: 0.00, img: "" },
            { id: "150", desc: "DESINFETANTE COALA 120ML", preco: 0.00, img: "" },
            { id: "200", desc: "ESCOVA DENTAL SORRISO", preco: 0.00, img: "" },
            { id: "250", desc: "HIALURONICO LOREAL NOITE", preco: 0.00, img: "" },
            { id: "300", desc: "LEITE DE COLONIA 100ML", preco: 0.00, img: "" },
            { id: "350", desc: "PAPEL HIG. SULLEG C/4", preco: 0.00, img: "" },
            { id: "400", desc: "SABONETE ALMA DE FLORES 130G", preco: 0.00, img: "" },
            { id: "432", desc: "VASSOURA DE PALHA 3 FIOS", preco: 0.00, img: "" }
            // Nota: Voc√™ pode preencher os nomes exatos de todos no ADM e salvar.
        ];

        let carrinho = {};
        let historicoVendas = [];

        function renderizar(itens = produtos) {
            const vitrine = document.getElementById('vitrine');
            vitrine.innerHTML = itens.map(p => `
                <div class="card-produto bg-white p-4 rounded-[40px] shadow-lg flex flex-col justify-between">
                    <div class="img-container"><img src="${p.img || 'https://via.placeholder.com/150?text=Radar'}" class="img-produto"></div>
                    <div class="mt-4 text-center">
                        <p class="text-[8px] font-black text-blue-500 uppercase">REF: ${p.id}</p>
                        <h3 class="font-bold text-slate-800 text-[10px] uppercase leading-tight h-8 overflow-hidden">${p.desc}</h3>
                        <p class="text-blue-600 font-black text-xl mt-1 italic">R$ ${p.preco.toFixed(2).replace('.', ',')}</p>
                    </div>
                    <div class="flex items-center justify-between bg-slate-100 p-1 rounded-2xl mt-3 border border-white">
                        <button onclick="mudarQtd('${p.id}', -1)" class="w-10 h-10 bg-white rounded-xl shadow-sm font-black text-red-500">-</button>
                        <input type="number" id="qtd-${p.id}" value="${carrinho[p.id] || 0}" class="w-12 bg-transparent text-center font-black text-sm outline-none" readonly>
                        <button onclick="mudarQtd('${p.id}', 1)" class="w-10 h-10 bg-white rounded-xl shadow-sm font-black text-green-500">+</button>
                    </div>
                </div>
            `).join('');
            atualizarTotal();
        }

        function mudarQtd(id, delta) {
            carrinho[id] = (carrinho[id] || 0) + delta;
            if (carrinho[id] < 0) carrinho[id] = 0;
            const input = document.getElementById(`qtd-${id}`);
            if(input) input.value = carrinho[id];
            atualizarTotal();
        }

        function atualizarTotal() {
            let total = 0;
            produtos.forEach(p => { 
                total += (carrinho[p.id] || 0) * (parseFloat(p.preco) || 0); 
            });
            document.getElementById('total-geral').innerText = `R$ ${total.toFixed(2).replace('.', ',')}`;
        }

        function mudarAba(aba) {
            document.querySelectorAll('.secao-aba').forEach(s => s.classList.add('hidden'));
            document.querySelectorAll('.aba-btn').forEach(b => b.classList.remove('aba-ativa', 'bg-blue-600', 'text-white'));
            document.getElementById('aba-' + aba).classList.remove('hidden');
            document.getElementById('btn-' + aba).classList.add('aba-ativa');
            if(aba === 'vendas') renderVendas();
            if(aba === 'financeiro') renderFinanceiro();
        }

        function renderVendas() {
            const container = document.getElementById('historico-vendas');
            if(historicoVendas.length === 0) return container.innerHTML = "Sem pedidos.";
            container.innerHTML = historicoVendas.map(v => `
                <div class="bg-slate-50 p-4 rounded-3xl border">
                    <div class="flex justify-between font-black text-[10px]"><span>${v.data}</span><span class="text-green-600">R$ ${v.total}</span></div>
                    <p class="font-bold text-slate-700 uppercase">${v.cliente}</p>
                </div>
            `).join('');
        }

        function renderFinanceiro() {
            let total = 0;
            historicoVendas.forEach(v => total += parseFloat(v.total.replace(',', '.')));
            document.getElementById('fin-total').innerText = `R$ ${total.toFixed(2).replace('.', ',')}`;
        }

        function enviarWhatsApp() {
            const nome = document.getElementById('cliente_nome').value;
            const end = document.getElementById('cliente_end').value;
            const total = document.getElementById('total-geral').innerText;
            if(!nome || !end) return alert("Preencha os dados!");

            let msg = `*RADAR DISTRIBUIDORA*\nüë§ *CLIENTE:* ${nome}\nüìç *LOCAL:* ${end}\n\n`;
            let tem = false;
            produtos.forEach(p => {
                if(carrinho[p.id] > 0) {
                    msg += `‚úÖ ${carrinho[p.id]}x ${p.desc}\n`;
                    tem = true;
                }
            });

            if(!tem) return alert("Selecione os produtos!");
            msg += `\nüí∞ *VALOR TOTAL: ${total}*`;
            
            historicoVendas.unshift({ data: new Date().toLocaleString(), cliente: nome, total: total.replace('R$ ', '') });
            window.open(`https://wa.me/${FONE}?text=${encodeURIComponent(msg)}`);
        }

        function abrirAdmin() {
            const lista = document.getElementById('lista-edicao');
            lista.innerHTML = produtos.map((p, i) => `
                <div class="flex items-center gap-3 bg-white p-3 rounded-2xl border mb-2">
                    <input type="text" value="${p.img}" onchange="produtos[${i}].img=this.value" placeholder="URL Foto" class="w-16 p-2 text-[9px] bg-slate-50 rounded">
                    <span class="flex-1 text-[10px] font-black uppercase truncate">${p.desc}</span>
                    <input type="number" step="0.01" value="${p.preco}" onchange="produtos[${i}].preco=parseFloat(this.value)" class="w-20 p-2 text-right font-black text-blue-600 rounded bg-blue-50">
                </div>
            `).join('');
            document.getElementById('modalAdmin').style.display = 'block';
        }

        function exportarDados() {
            let html = document.documentElement.outerHTML;
            html = html.replace(/let produtos = \[[\s\S]*?\];/, `let produtos = ${JSON.stringify(produtos, null, 4)};`);
            html = html.replace(/let historicoVendas = \[[\s\S]*?\];/, `let historicoVendas = ${JSON.stringify(historicoVendas, null, 4)};`);
            const blob = new Blob([html], {type: 'text/html'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'index.html';
            a.click();
            alert("SITE ATUALIZADO!");
        }

        function filtrar() {
            const t = document.getElementById('busca').value.toLowerCase();
            renderizar(produtos.filter(p => p.desc.toLowerCase().includes(t)));
        }

        function fazerLogin() { if(prompt("Senha:") === SENHA_MESTRA) abrirAdmin(); }
        function fecharAdmin() { document.getElementById('modalAdmin').style.display='none'; renderizar(); }

        renderizar();
    </script>
</body>
</html>
